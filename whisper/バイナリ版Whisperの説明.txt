main.exeとwhisper.dllについて。

https://github.com/ggerganov/whisper.cpp を以下のように改造してビルドした。

・条件による強制終了
同じ認識結果が3回連続したら認識を終了する。

・終了コードの変更
-l で不正な言語を指定したときに、終了コード0を返していたのを、1を返すように変更した。

・起動オプション -t
-t に 0 を指定すると、スレッド数をプロセッサ数と同じにする

・起動オプション -vb --voice_blocks
起動オプション -vb --voice_blocks を追加した。
次に指定したtxtファイルを読み込む。txtファイルには音声の有声部分が記載されており、そこ以外の認識をスキップする。

txtファイルはタブ区切りで、フォーマットは以下の通り
---
(無視)	(無視)	有声部分開始位置(1)	有声部分終了位置(1)	(無視)	(有声部分開始位置(2))	(有声部分終了位置(2))
---
1行につき、1つの有声部分を表す。
有声部分開始位置、有声部分終了位置はmsで指定する。
有声部分開始位置(1)より有声部分開始位置(2)が優先される。
有声部分終了位置(1)より有声部分終了位置(2)が優先される。

例：
x	y	100	200	z	110	210
⇒有声部分は 110ms〜210msになる。

例：
x	y	100	200
⇒有声部分は 100ms〜200msになる。

以上